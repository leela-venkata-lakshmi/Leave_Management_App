
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
<div class="container">
    <h2 class="text-success">Leave Summary</h2>
    <div class="card-container">
        <div class="card">
            <h3>Sick Leave</h3>
            <div class="leave-details">
                <p>Allocated: <span id="sick-allocated">5</span> days</p>
                <p>Utilized: <span id="sick-utilized">0</span> days</p>
                <p>Available: <span id="sick-available">5</span> days</p>
            </div>
        </div>
        <div class="card">
            <h3>PTO (Paid Time Off)</h3>
            <div class="leave-details">
                <p>Allocated: <span id="pto-allocated">20</span> days</p>
                <p>Utilized: <span id="pto-utilized">0</span> days</p>
                <p>Available: <span id="pto-available">20</span> days</p>
            </div>
        </div>
        <div class="card" id="maternity">
            <h3>Maternity Leave</h3>
            <div class="leave-details" >
                <p>Allocated: <span id="maternity-allocated">50</span> days</p>
                <p>Utilized: <span id="maternity-utilized">0</span> days</p>
                <p>Available: <span id="maternity-available">50</span> days</p>
            </div>
        </div>
        <div class="card" id="paternity">
            <h3>Paternity Leave</h3>
            <div class="leave-details" >
                <p>Allocated: <span id="paternity-allocated">10</span> days</p>
                <p>Utilized: <span id="paternity-utilized">0</span> days</p>
                <p>Available: <span id="paternity-available">10</span> days</p>
            </div>
        </div>
    </div>

    <div class="upcoming-holidays">
        <h5>Upcoming Holidays</h5>
        <ul>
            <li>Saṃvatsarī/ Ganesh Chaturthi - September 7</li>
            <li>Milad un-Nabi/Id-e-Milad - September 16</li>
            <li>Mahatma Gandhi Jayanti - October 2</li>
            <li>Diwali - October 31</li>
        </ul>
    </div>
</div>
<script>
    // To show the leave summary according to gender
document.addEventListener('DOMContentLoaded', function() {
fetchAndUseGender();
});

    function fetchAndUseGender() {
        fetch('/Leave_Mgmt/getEmployeeGender') // Endpoint to get gender
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json(); // Parse response as JSON
            })
            .then(data => {
                const gender = data.gender; // Gender value received from server
                  console.log("sdfffdff");
                if (gender === 'Male') {
                    console.log('User is Male');
                    // Hide or show elements based on gender
                    document.getElementById('maternity').style.display = 'none';
                } else if (gender === 'Female') {
                    console.log('User is Female');
                    // Hide or show elements based on gender
                    document.getElementById('paternity').style.display = 'none';
                }
            })
            .catch(error => console.error('Error fetching gender:', error));
    }

//To fetch leave summary
    document.addEventListener('DOMContentLoaded', function() {

        fetch('/Leave_Mgmt/leaveSummary')
            .then(response => response.json())
            .then(data => {

                document.getElementById('sick-allocated').textContent = data.sickAllocated;
                document.getElementById('sick-utilized').textContent = data.sickUtilized;
                document.getElementById('sick-available').textContent = data.sickAvailable;

                document.getElementById('pto-allocated').textContent = data.ptoAllocated;
                document.getElementById('pto-utilized').textContent = data.ptoUtilized;
                document.getElementById('pto-available').textContent = data.ptoAvailable;

                document.getElementById('maternity-allocated').textContent = data.maternityAllocated;
                document.getElementById('maternity-utilized').textContent = data.maternityUtilized;
                document.getElementById('maternity-available').textContent = data.maternityAvailable;

                document.getElementById('paternity-allocated').textContent = data.paternityAllocated;
                document.getElementById('paternity-utilized').textContent = data.paternityUtilized;
                document.getElementById('paternity-available').textContent = data.paternityAvailable;
            })
            .catch(error => console.error('Error fetching leave summary:', error));
    });

</script>

<script src="scripts/script.js"></script>
<script src="scripts/script1.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>

